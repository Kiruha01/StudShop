# Инструкция по использованию

Скрипты для началльной настройки:

```sh
export .env.dev

flask recreate_db # пересоздание таблиц
flask make_admin  # назначение всех существующих пользователей админами
flask create_data # создание данных для начала работы
```

## Авторизация
Для авторизации необходимо нажать на кнопку **Войти** в правом верхнем углу страницы. 

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/login.png)

Произойдёт перенаправление на форму авторизации Google, где нужно выбрать аккаунт.

## Взаимодействие с сайтом 
### Объявления
На главной странице отображаются все активные объявления. При необходимости, их можно
отфильтровать по брони.
![](https://github.com/Kiruha01/StudShop/blob/main/pictures/filter.png)
#### Создать
После входа становится доступным кнопка **Создать объявление**. В открывшемся окне
необходимо ввести *Название*, *цену*б *описание* (необязательно), *расположение* и *категорию* (необязательно)
и нажать **Сохранить**.
![](https://github.com/Kiruha01/StudShop/blob/main/pictures/create.png)

После одобрения администратором оно появится в лете объявлений.

#### Редактировать
Для редактирования необходимо перейти на страницу объявления. Если оно ещё не было 
одобрено, найти его можно на странице пользователя (кнопка с вашим именем в правом верхнем углу).

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/firefox_y2DC8KFpA9.png)

В левой части под фотографией находится кнопка **Редактировать**. При нажатии на неё можно
изменить основную информацию, а также добавить или удалить фотографии.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/edit.png)

#### Одобрить
Если вы являетесь администратором, то в верхней части сайта присутствует лента объявлений,
ожидающих одобрения. Для одобрения необходимо перейти на страницу объявления и нажать 
кнопку **Одобрить** в левой части под фотографией. 

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/buttons_approve.png)

Если объявление нарушает правила сайта, его можно забанить, нажав соответствующую кнопку 
в том же месте.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/buttons_ban.png)

#### Закрыть
Если объявление потеряло актуальность, его всегда можно закрыть, нажав на соответствующую кнопку.
Оно больше не будет отображаться в ленте объявлений, но его можно найти на странице пользователя.

### Пользователь
Для перехода на страницу текущего пользователя необходимо нажать на кнопку с вашим именем в правом верхнем углу.
Откроется страница с вашими данными, списком совершённых сделок и списком всех ваших объявлений.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/firefox_y2DC8KFpA9.png)

#### Редактирование способа связи
Для изменения способа связи необходимо ввести нужную ссылку соответствующем поле и
нажать кнопку **Сохранить изменения**.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/com_method.png)

#### Создание и удаление категорий
Если пользователь является администратором, ему доступна кнопка **Создать категорию**.
В открывшемся окне можно создать категорию, введя её имя и нажав кнопку **Сохранить**, или
удалить существующую, нажав крестик рядом с её названием.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/category.png)

#### Совершенные сделки
В разделе **Совершенные сделки** содержится список всех совершенных сделок данного продовца.
Данные представлены в виде 

|Название товара| Покупатель | Дата покупки |
|-----|------| --------|

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/deals.png)

#### Ваши объявления
В этом разделе отображаются все объявления, даже пока не одобренные администратором. 
Если объявление закрыто, это помечается соответствующей плашкой. 

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/your_advs.png)

#### Просмотр других пользователей
При просмотре объявления вы можете нажать на имя продавца, чтобы перейти на его страницу.
Там можно найти данные для связи, сделки и объявления этого продавца. 

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/create_admin.png)

Если вы являетесь администратором, вы можете назначить администратором или разжалобить данного пользователя.

### Бронирование
Сайт позволяет встать в очередь за товаром. При этом, если товар уже забронирован, то 
у объявления появляется соответствующая плашка и счётчик отображает, сколько человек уже стоит
в очереди.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/if_booked.png)
#### Забронировать
Для бронирования нужно нажать на кнопку **Забронировать** под фотографией. Для отмены бронирования - нажать 
на кнопку **Отказаться от бронирования**.

#### Управление списком бронирования
Если вы являетесь хозяином объявления, то вам становится доступен список людей в очереди.
В этом списке отображается имя человека, способ связи с ним и дата бронирования.
При желании, вы можете удалить кого-то из списка.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/bookings.png)

#### Совершить сделку
Когда человек найдем и сделка состоялось, необходимо нажать кнопку **Подтвердить продажу**. 
Список бронирований очиститься, а первая строчка из этой очереди занесётся в ваш список
совершённых сделок. Также объявление автоматически закроется.

![](https://github.com/Kiruha01/StudShop/blob/main/pictures/sell.png)
